<html lang="en">
  <%- include('../partials/head.ejs') %>

  <body>
    <%- include('../partials/nav.ejs') %>

    <div class="container">
      <div class="row mt-5 mx-1 mx-lg-4 align-items-center">
        <div class="col">
          <p class="h2 text-break font-monospace"><%= blog.title %></p>
        </div>
        <div class="col-12 col-lg-2">
          <a class="btn btn-outline-dark" data-doc="<%= blog._id %>" id="delete">Delete</a>
        </div>
      </div>
      <div class="row mt-5 mx-1 mx-lg-4">
        <div class="col">
          <p class="font-monospace text-break"><%= blog.body %></p>
        </div>
      </>

      <%- include('../partials/footer.ejs') %>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4"
      crossorigin="anonymous"
    ></script>
    <script>
      const trash = document.querySelector('#delete');
      trash.addEventListener('click', (e) => {
        const endpoint = `/blogs/${trash.dataset.doc}`;
        fetch(endpoint, { method: 'DELETE' })
          .then((response) => {
            return response.json();
          })
          .then((data) => {
            window.location.href = data.redirect;
          })
          .catch((err) => {
            console.log(err);
          })
      });
    </script>
  </body>
</html>
